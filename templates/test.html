<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <title>Meu Banco - Saldo</title>
</head>
<body>
  <div class="wrap" role="application" aria-label="Aplicativo de saldo">
    <header>
      <h1>Meu Banco — Conta Pessoal</h1>
      <div class="meta" id="conta-info">Ag 0001 • Conta 12345-6</div>
    </header>

    <div class="saldo-box">
      <div class="saldo-card" aria-live="polite">
        <small>Saldo disponível</small>
        <div id="saldoValor" class="saldo-valor">R$ 0,00</div>
      </div>

      <div style="flex:1">
        <p style="margin:0 0 8px 0;color:var(--muted)">Registrar movimentação</p>
        <div class="controls" role="region" aria-label="Controles de movimentação">
          <input id="descricao" type="text" placeholder="Descrição (ex: Salário, Mercado)" style="flex:1"/>
          <input id="valor" type="number" step="0.01" min="0.01" placeholder="Valor R$" style="width:120px"/>
          <button id="btnDeposit" class="btn btn-deposit">Depositar</button>
          <button id="btnWithdraw" class="btn btn-withdraw">Sacar</button>
          <button id="btnClear" class="btn btn-clear" title="Limpar histórico">Limpar</button>
        </div>
      </div>
    </div>

    <main>
      <link rel="stylesheet" href="{{ url_for('static', filename='style0.css') }}">
...
<a href="{{ url_for('menu') }}"
   style="display:block;text-align:center;margin:20px;color:#2563eb;font-weight:bold;">
  ← Voltar ao Menu
</a>

      <div class="grid">
        <div class="panel">
          <h3>Histórico de transações</h3>
          <div id="history" class="history" aria-live="polite">
            <div class="meta">Nenhuma transação registrada.</div>
          </div>
        </div>

        <div class="panel">
          <h3>Resumo</h3>
          <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
            <div class="meta">Entradas: <span id="totalIn">R$ 0,00</span></div>
            <div class="meta">Saídas: <span id="totalOut">R$ 0,00</span></div>
            <div class="meta">Última movimentação: <span id="lastMov">—</span></div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      S.F.P
    </footer>
  </div>

  <script>
    // JavaScript para saldo e histórico
    let saldo = 0;
    let totalIn = 0;
    let totalOut = 0;
    const historyEl = document.getElementById('history');
    const saldoValorEl = document.getElementById('saldoValor');
    const totalInEl = document.getElementById('totalIn');
    const totalOutEl = document.getElementById('totalOut');
    const lastMovEl = document.getElementById('lastMov');

    function formatMoney(v) {
      return v.toLocaleString('pt-BR', { style:'currency', currency:'BRL' });
    }

    function renderSaldo() {
      saldoValorEl.textContent = formatMoney(saldo);
      totalInEl.textContent = formatMoney(totalIn);
      totalOutEl.textContent = formatMoney(totalOut);
      if (saldo < 0) {
        saldoValorEl.style.color = '#fff';
        saldoValorEl.parentElement.style.background = 'linear-gradient(90deg,#dc2626,#ff7b7b)';
      } else {
        saldoValorEl.style.color = '#fff';
        saldoValorEl.parentElement.style.background = 'linear-gradient(90deg,#2563eb,#4f46e5)';
      }
    }

    function addHistoryItem(desc, value, type) {
      const item = document.createElement('div');
      item.className = 'item';
      const left = document.createElement('div');
      left.innerHTML = `
     <div><strong>${desc}</strong></div>
  <div class="meta">${new Date().toLocaleString()}</div>
`;

const right = document.createElement('div');
right.innerHTML = `
  <div class="valor" style="color:${type==='in'?'#16a34a':'#dc2626'}">${formatMoney(value)}</div>
  <div class="meta">${type==='in'?'Entrada':'Saída'}</div>
`;

item.appendChild(left);
item.appendChild(right);

      if (historyEl.children.length === 1 && historyEl.children[0].classList.contains('meta')) {
        historyEl.innerHTML = '';
      }
      historyEl.prepend(item);
      lastMovEl.textContent = new Date().toLocaleString();
    }

    document.getElementById('btnDeposit').addEventListener('click', ()=> {
      const desc = document.getElementById('descricao').value.trim() || 'Depósito';
      const val = Number(document.getElementById('valor').value);
      if (!val || val <= 0) { alert('Informe um valor válido.'); return; }
      saldo += val;
      totalIn += val;
      addHistoryItem(desc, val, 'in');
      renderSaldo();
      document.getElementById('descricao').value = '';
      document.getElementById('valor').value = '';
    });

    document.getElementById('btnWithdraw').addEventListener('click', ()=> {
      const desc = document.getElementById('descricao').value.trim() || 'Saque';
      const val = Number(document.getElementById('valor').value);
      if (!val || val <= 0) { alert('Informe um valor válido.'); return; }
      if (val > saldo) {
        if (!confirm('Saldo insuficiente. Deseja prosseguir e ficar no negativo?')) return;
      }
      saldo -= val;
      totalOut += val;
      addHistoryItem(desc, val, 'out');
      renderSaldo();
      document.getElementById('descricao').value = '';
      document.getElementById('valor').value = '';
    });

    document.getElementById('btnClear').addEventListener('click', ()=> {
      if (!confirm('Apagar todas as transações e resetar saldo?')) return;
      saldo = 0; totalIn = 0; totalOut = 0;
      historyEl.innerHTML = '<div class="meta">Nenhuma transação registrada.</div>';
      lastMovEl.textContent = '—';
      renderSaldo();
    });

    // inicializa
    renderSaldo();
  </script>
</body>
</html>